var r=(e,c,a)=>new Promise((C,p)=>{var o=i=>{try{u(a.next(i))}catch(s){p(s)}},m=i=>{try{u(a.throw(i))}catch(s){p(s)}},u=i=>i.done?C(i.value):Promise.resolve(i.value).then(o,m);u((a=a.apply(e,c)).next())});import{B as g,u as E}from"./useTable.35e7adb4.js";import{T as w}from"./useForm.d0a5ee18.js";import{s as A,d as S,a as x,b as _}from"./index.85fdaa94.js";import{g as P}from"./index.da94e228.js";import{b as D}from"./index.24728625.js";import R from"./PipelineModal.550080d0.js";import T from"./PipelineDescModal.2a9d3ed3.js";import{c as y,s as k}from"./pipeline.data.13f2061e.js";import{_ as v,h as $}from"./index.c0a3bc85.js";import{A as V,a0 as f,B as z,D as H,k as b,a5 as B,ad as I}from"./vendor.52d192f7.js";import"./index.1c6370f0.js";import"./index.cd360e12.js";/* empty css               *//* empty css               */import"./useWindowSizeFn.34f605a6.js";import"./useContentViewHeight.26794800.js";/* empty css               *//* empty css                *//* empty css               *//* empty css               */import"./useSortable.96f14e96.js";/* empty css               *//* empty css              *//* empty css               */import"./index.1c8e4638.js";import"./download.0ca988cf.js";import"./index.e064266a.js";import"./endpoint.data.75dd7889.js";import"./RedisRuleModal.c702c525.js";import"./EsRuleModal.223de680.js";import"./MongodbRuleModal.fb84a55b.js";import"./MsgQueueRuleModal.7a80ecb0.js";import"./HttpRuleModal.32b2a015.js";import"./LuaScriptModal.865de4f1.js";import"./RuleCopyModal.54d95afe.js";const N=V({name:"PipelineManagement",components:{BasicTable:g,PipelineModal:R,TableAction:w,PipelineDescModal:T},setup(){const[e,{openModal:c}]=D(),[a,{openModal:C}]=D(),{createMessage:p,createErrorModal:o}=$(),[m,{reload:u}]=E({title:"",api:A,columns:y,formConfig:{labelWidth:120,schemas:k},useSearchForm:!0,showTableSetting:!0,bordered:!0,striped:!0,pagination:!1,showIndexColumn:!1,actionColumn:{width:150,title:"\u64CD\u4F5C",dataIndex:"action",slots:{customRender:"action"},fixed:void 0}});function i(){c(!0,{isUpdate:!1})}function s(n){return r(this,null,function*(){if(!(yield j(n.id))){o({title:"\u9519\u8BEF\u63D0\u793A",content:"\u8BE5\u7BA1\u9053\u6B63\u5728\u8FD0\u884C\u4E2D\uFF0C\u65E0\u6CD5\u7F16\u8F91\uFF1B\u8BF7\u5148\u5728'\u8FD0\u884C\u7BA1\u7406'\u6A21\u5757\u4E2D\u505C\u6B62"});return}yield c(!0,{id:n.id,isUpdate:!0})})}function F(n){return r(this,null,function*(){if(!(yield j(n.id))){o({title:"\u9519\u8BEF\u63D0\u793A",content:"\u8BE5\u7BA1\u9053\u6B63\u5728\u8FD0\u884C\u4E2D\uFF0C\u65E0\u6CD5\u5220\u9664\uFF1B\u8BF7\u5148\u5728'\u8FD0\u884C\u7BA1\u7406'\u6A21\u5757\u4E2D\u505C\u6B62"});return}yield S(n.id).then(()=>{l()})})}function t(n){C(!0,n.id)}function l(){u()}function h(n){return r(this,null,function*(){yield x(n.id).then(()=>{l()})})}function M(n){return r(this,null,function*(){if(!(yield j(n.id))){o({title:"\u9519\u8BEF\u63D0\u793A",content:"\u8BE5\u7BA1\u9053\u6B63\u5728\u8FD0\u884C\u4E2D\uFF0C\u65E0\u6CD5\u505C\u7528\uFF1B\u8BF7\u5148\u5728'\u8FD0\u884C\u7BA1\u7406'\u6A21\u5757\u4E2D\u505C\u6B62"});return}yield _(n.id).then(()=>{l()})})}function j(n){return r(this,null,function*(){let d=yield P(n);return!(d==2||d==3||d==4)})}return{registerTable:m,registerModal:e,registerDescModal:a,createMessage:p,createErrorModal:o,updateEnable:j,handleCreate:i,handleEdit:s,handleDelete:F,handleSuccess:l,handleDesc:t,handleEnable:h,handleDisable:M}}}),U=I(" \u65B0\u589E ");function W(e,c,a,C,p,o){const m=f("a-button"),u=f("TableAction"),i=f("BasicTable"),s=f("PipelineModal"),F=f("PipelineDescModal");return z(),H("div",null,[b(i,{size:"small",onRegister:e.registerTable},{toolbar:B(()=>[b(m,{type:"primary",onClick:e.handleCreate},{default:B(()=>[U]),_:1},8,["onClick"])]),action:B(({record:t})=>[b(u,{actions:[{label:"\u67E5\u770B",icon:"ant-design:eye-outlined",onClick:e.handleDesc.bind(null,t)},{label:"\u7F16\u8F91",icon:"clarity:note-edit-line",onClick:e.handleEdit.bind(null,t)},{label:"\u5220\u9664",icon:"ant-design:delete-outlined",color:"error",popConfirm:{title:"\u662F\u5426\u786E\u8BA4\u5220\u9664",confirm:e.handleDelete.bind(null,t)}},{label:"\u542F\u7528",icon:"ant-design:key-outlined",onClick:e.handleEnable.bind(null,t),ifShow:l=>t.status=="9"},{label:"\u505C\u7528",icon:"ant-design:stop-outlined",onClick:e.handleDisable.bind(null,t),ifShow:l=>t.status==="0"}]},null,8,["actions"])]),_:1},8,["onRegister"]),b(s,{onRegister:e.registerModal,onSuccess:e.handleSuccess},null,8,["onRegister","onSuccess"]),b(F,{onRegister:e.registerDescModal,onSuccess:e.handleSuccess},null,8,["onRegister","onSuccess"])])}var Ae=v(N,[["render",W]]);export{Ae as default};
