var L=(v,i,l)=>new Promise((o,p)=>{var y=s=>{try{u(l.next(s))}catch(g){p(g)}},h=s=>{try{u(l.throw(s))}catch(g){p(g)}},u=s=>s.done?o(s.value):Promise.resolve(s.value).then(y,h);u((l=l.apply(v,i)).next())});import{A as $,a$ as I,an as B,z as b,P as z,y as R,u as e,B as V,D as E,F as C,G as D,k as t,a5 as m,aS as K,ad as P,J as U,b0 as G,aa as M,H as r}from"./vendor.52d192f7.js";/* empty css              *//* empty css               */import{u as q,a as A,L as H,_ as J,b as O}from"./LoginFormTitle.ebaa9ede.js";import{b as Q,a as W,e as X,f as Y,h as Z}from"./index.c0a3bc85.js";const ee=r("br",null,null,-1),se=r("br",null,null,-1),ae=r("br",null,null,-1),oe=r("br",null,null,-1),te=r("br",null,null,-1),ne=r("br",null,null,-1),me=$({setup(v){const i=I.Item,l=B.Password,{t:o}=Q(),{notification:p,createErrorModal:y}=Z(),{prefixCls:h}=W("login"),u=X(),s=Y(),{setLoginState:g,getLoginState:N}=q(),{getFormRules:j}=A(),S=b(),w=b(!1);b(!1);const c=z({account:"admin",password:"123456"}),{validForm:k}=O(S),x=R(()=>e(N)===H.LOGIN);function F(){return L(this,null,function*(){var n,a,_;const f=yield k();if(!!f)try{w.value=!0;const d=yield u.login({password:f.password,username:f.account,mode:"none"});d&&(s.refresh(),p.success({message:o("sys.login.loginSuccessTitle"),description:`${o("sys.login.loginSuccessDesc")}: ${d.realName}`,duration:3}))}catch(d){const T=(_=(a=(n=d.response)==null?void 0:n.data)==null?void 0:a.message)!=null?_:d.message;y({title:o("sys.api.errorTip"),content:T,getContainer:()=>document.body.querySelector(`.${h}`)||document.body})}finally{w.value=!1}})}return(f,n)=>(V(),E(M,null,[C(t(J,{class:"enter-x"},null,512),[[D,e(x)]]),C(t(e(I),{class:"p-4 enter-x",model:e(c),rules:e(j),ref:(a,_)=>{_.formRef=a,S.value=a},onKeypress:G(F,["enter"])},{default:m(()=>[t(e(i),{name:"account",class:"enter-x"},{default:m(()=>[t(e(B),{size:"large",value:e(c).account,"onUpdate:value":n[0]||(n[0]=a=>e(c).account=a),placeholder:e(o)("sys.login.userName"),class:"fix-auto-fill"},null,8,["value","placeholder"])]),_:1}),t(e(i),{name:"password",class:"enter-x"},{default:m(()=>[t(e(l),{size:"large",visibilityToggle:"",value:e(c).password,"onUpdate:value":n[1]||(n[1]=a=>e(c).password=a),placeholder:e(o)("sys.login.password")},null,8,["value","placeholder"])]),_:1}),t(e(i),{class:"enter-x"},{default:m(()=>[t(e(K),{type:"primary",size:"large",block:"",onClick:F,loading:w.value},{default:m(()=>[P(U(e(o)("sys.login.loginButton")),1)]),_:1},8,["loading"])]),_:1}),ee,se,ae,oe,te,ne]),_:1},8,["model","rules","onKeypress"]),[[D,e(x)]])],64))}});export{me as default};
