var _=(e,l,s)=>new Promise((f,m)=>{var p=a=>{try{i(s.next(a))}catch(r){m(r)}},c=a=>{try{i(s.throw(a))}catch(r){m(r)}},i=a=>a.done?f(a.value):Promise.resolve(a.value).then(p,c);i((s=s.apply(e,l)).next())});import{B as M,a as S}from"./index.24728625.js";import{_ as b,h as w}from"./index.c0a3bc85.js";import{d as j,u as y}from"./index.da94e228.js";import{A as h,z as F,y as k,a0 as d,B as x,a1 as D,a5 as n,k as t,ad as E,J as P,a4 as I}from"./vendor.52d192f7.js";import"./useWindowSizeFn.34f605a6.js";const R=h({name:"SetPositionModal",components:{BasicModal:M},emits:["success","register"],setup(e,{emit:l}){const s=F(),f=F({id:"",file:"",index:0}),m=F({}),{createWarningModal:p}=w(),i={index:[{required:!0,validator:(o,u)=>_(this,null,function*(){return u==null?Promise.reject("\u8BF7\u8F93\u5165Position"):Number.isInteger(u)?u<0?Promise.reject("\u8BF7\u8F93\u5165\u5927\u4E8E\u7B49\u4E8E0\u7684\u503C"):Promise.resolve():Promise.reject("\u8BF7\u8F93\u5165\u6574\u6570")}),trigger:"change"}]},[a,{setModalProps:r,closeModal:g}]=S(o=>_(this,null,function*(){s.value.resetFields(),r({confirmLoading:!1,width:1e3}),f.value.id=o,m.value=yield j(o)})),v=k(()=>"\u8BBE\u7F6EPosition");function B(){return _(this,null,function*(){try{r({confirmLoading:!0});let o=!1;if(yield s.value.validate().then(()=>{o=!0}),!o)return;let u=f.value;if(u.index!=0&&(u.file===""||u.file==null)){p({title:"\u63D0\u793A",content:"\u8BF7\u8F93\u5165File\u5185\u5BB9"});return}yield y(u),g(),l("success",{})}finally{r({confirmLoading:!1})}})}return{registerModal:a,descData:m,getTitle:v,formRef:s,formState:f,rules:i,handleSubmit:B}}});function $(e,l,s,f,m,p){const c=d("a-form-item"),i=d("a-col"),a=d("a-row"),r=d("a-input"),g=d("a-input-number"),v=d("a-form"),B=d("BasicModal");return x(),D(B,I(e.$attrs,{onRegister:e.registerModal,canFullscreen:!1,title:e.getTitle,onOk:e.handleSubmit}),{default:n(()=>[t(v,{ref:"formRef",model:e.formState,rules:e.rules,"label-col":{style:{width:"120px"}},"wrapper-col":{span:16}},{default:n(()=>[t(a,null,{default:n(()=>[t(i,{span:24},{default:n(()=>[t(c,{label:"\u5F53\u524D"},{default:n(()=>[E(" (File: "+P(e.descData.positionName)+" Position: "+P(e.descData.positionIndex)+") ",1)]),_:1})]),_:1})]),_:1}),t(a,null,{default:n(()=>[t(i,{span:12},{default:n(()=>[t(c,{label:"File",name:"file"},{default:n(()=>[t(r,{value:e.formState.file,"onUpdate:value":l[0]||(l[0]=o=>e.formState.file=o)},null,8,["value"])]),_:1})]),_:1}),t(i,{span:10},{default:n(()=>[t(c,{label:"Position",name:"index"},{default:n(()=>[t(g,{value:e.formState.index,"onUpdate:value":l[1]||(l[1]=o=>e.formState.index=o)},null,8,["value"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},16,["onRegister","title","onOk"])}var O=b(R,[["render",$]]);export{O as default};
