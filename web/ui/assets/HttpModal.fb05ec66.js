var E=Object.defineProperty,A=Object.defineProperties;var x=Object.getOwnPropertyDescriptors;var B=Object.getOwnPropertySymbols;var L=Object.prototype.hasOwnProperty,b=Object.prototype.propertyIsEnumerable;var j=(s,o,e)=>o in s?E(s,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[o]=e,f=(s,o)=>{for(var e in o||(o={}))L.call(o,e)&&j(s,e,o[e]);if(B)for(var e of B(o))b.call(o,e)&&j(s,e,o[e]);return s},_=(s,o)=>A(s,x(o));var c=(s,o,e)=>new Promise((r,n)=>{var u=a=>{try{i(e.next(a))}catch(d){n(d)}},l=a=>{try{i(e.throw(a))}catch(d){n(d)}},i=a=>a.done?r(a.value):Promise.resolve(a.value).then(u,l);i((e=e.apply(s,o)).next())});import{B as C,a as D}from"./index.24728625.js";import{h as H,t as S,p as $,b as P}from"./endpoint.data.75dd7889.js";import{B as R,h as O}from"./useForm.d0a5ee18.js";import{_ as U,h as V}from"./index.c0a3bc85.js";import{A as z,z as g,u as p,y as I,a0 as F,B as N,a1 as W,a5 as h,k as v,a4 as G,ad as q}from"./vendor.52d192f7.js";import"./useWindowSizeFn.34f605a6.js";/* empty css               *//* empty css              *//* empty css               *//* empty css               */import"./index.1c6370f0.js";/* empty css               *//* empty css                */import"./index.1c8e4638.js";import"./download.0ca988cf.js";const J=z({name:"HttpModal",components:{BasicModal:C,BasicForm:R},emits:["success","register"],setup(s,{emit:o}){const e=g(!0),r=g("");let n=g(!1);const{createSuccessModal:u}=V(),[l,{setFieldsValue:i,resetFields:a,validate:d}]=O({labelWidth:140,schemas:H,showActionButtonGroup:!1,actionColOptions:{span:23}}),[w,{setModalProps:m,closeModal:k}]=D(t=>c(this,null,function*(){yield a(),m({confirmLoading:!1,width:1e3,minHeight:300}),e.value=!!(t==null?void 0:t.isUpdate),p(e)&&(r.value=t.record.id,yield i(f({},t.record)))})),M=I(()=>p(e)?"\u7F16\u8F91HTTP\u63A5\u53E3\u7AEF\u70B9":"\u65B0\u589EHTTP\u63A5\u53E3\u7AEF\u70B9");function T(){return c(this,null,function*(){const t=yield d();n.value=!0;try{yield S(t),u({title:"\u63D0\u793A",content:"\u8FDE\u63A5\u6210\u529F"})}finally{n.value=!1}})}function y(){return c(this,null,function*(){try{const t=yield d();t.type=8,console.log(t),m({confirmLoading:!0}),p(e)?(t.id=r.value,yield $(t)):yield P(t),k(),o("success",{isUpdate:p(e),values:_(f({},t),{id:r.value})})}finally{m({confirmLoading:!1})}})}return{registerModal:w,registerForm:l,getTitle:M,linkTestLoading:n,handleLinkTest:T,handleSubmit:y}}}),K=q("\u6D4B\u8BD5\u8FDE\u63A5");function Q(s,o,e,r,n,u){const l=F("BasicForm"),i=F("a-button"),a=F("BasicModal");return N(),W(a,G(s.$attrs,{onRegister:s.registerModal,title:s.getTitle,onOk:s.handleSubmit}),{insertFooter:h(()=>[v(i,{type:"dashed",onClick:s.handleLinkTest,loading:s.linkTestLoading},{default:h(()=>[K]),_:1},8,["onClick","loading"])]),default:h(()=>[v(l,{onRegister:s.registerForm},null,8,["onRegister"])]),_:1},16,["onRegister","title","onOk"])}var me=U(J,[["render",Q]]);export{me as default};
