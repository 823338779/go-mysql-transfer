var g=(t,s,o)=>new Promise((h,m)=>{var S=i=>{try{l(o.next(i))}catch(a){m(a)}},f=i=>{try{l(o.throw(i))}catch(a){m(a)}},l=i=>i.done?h(i.value):Promise.resolve(i.value).then(S,f);l((o=o.apply(t,s)).next())});import{B as F,u as R}from"./useTable.35e7adb4.js";import{T as I}from"./useForm.d0a5ee18.js";import{s as T,a as x,b as _,c as A}from"./index.da94e228.js";import{b as D}from"./index.24728625.js";import k from"./PipelineDescModal.a06c1b7a.js";import y from"./StreamDescModal.7dcf2046.js";import E from"./BatchDescModal.f50f89ff.js";import v from"./PositionModal.a452b7d4.js";import{w as u,bh as c,A as N,a0 as d,B as $,D as V,k as p,a5 as B,H as z,J as H}from"./vendor.52d192f7.js";/* empty css               */import{f as J,_ as L}from"./index.c0a3bc85.js";import"./index.1c6370f0.js";import"./index.cd360e12.js";/* empty css               *//* empty css               */import"./useWindowSizeFn.34f605a6.js";import"./useContentViewHeight.26794800.js";/* empty css               *//* empty css                *//* empty css               */import"./useSortable.96f14e96.js";/* empty css               *//* empty css              *//* empty css               */import"./index.1c8e4638.js";import"./download.0ca988cf.js";import"./index.85fdaa94.js";const W=[{title:"\u7BA1\u9053",dataIndex:"pipelineName",width:200,slots:{customRender:"pipelineName"}},{title:"\u72B6\u6001",dataIndex:"status",width:100,customRender:({record:t})=>{const s=t.status;if(s===0)return u(c,{color:"gray"},()=>"\u672A\u542F\u52A8");if(s===1)return u(c,{color:"red"},()=>"\u542F\u52A8\u5931\u8D25");if(s===2)return u(c,{color:"green"},()=>"\u8FD0\u884C\u4E2D");if(s===3)return u(c,{color:"cyan"},()=>"\u8FD0\u884C\u4E2D(\u5BA2\u6237\u7AEF\u6545\u969C)");if(s===4)return u(c,{color:"blue"},()=>"\u5168\u91CF\u540C\u6B65\u4E2D");if(s===5)return u(c,{color:"pink"},()=>"\u5168\u91CF\u540C\u6B65\u7ED3\u675F");if(s===9)return u(c,{color:"red"},()=>"\u505C\u6B62")}},{title:"\u6240\u5728\u8282\u70B9",dataIndex:"node",width:120,ifShow:()=>J().getIsCluster},{title:"\u542F\u52A8\u65F6\u95F4",dataIndex:"startTime",width:120}],q=N({name:"RunningManagement",components:{BasicTable:F,TableAction:I,PipelineDescModal:k,StreamDescModal:y,BatchDescModal:E,PositionModal:v},setup(){const[t,{openModal:s}]=D(),[o,{openModal:h}]=D(),[m,{openModal:S}]=D(),[f,{openModal:l}]=D(),[i,{reload:a}]=R({title:"",api:T,columns:W,showTableSetting:!0,bordered:!0,striped:!0,pagination:!1,showIndexColumn:!1,actionColumn:{width:250,title:"\u64CD\u4F5C",dataIndex:"action",slots:{customRender:"action"},fixed:void 0}});function M(n){s(!0,n.pipelineId)}function b(n){n.status==4||n.status==5?S(!0,n.pipelineId):h(!0,n.pipelineId)}function e(n){return g(this,null,function*(){try{yield x(n.pipelineId).then(()=>{C()})}catch(P){yield a()}})}function r(n){return g(this,null,function*(){try{yield _(n.pipelineId).then(()=>{C()})}catch(P){yield a()}})}function j(n){return g(this,null,function*(){yield A(n.pipelineId).then(()=>{a()})})}function w(n){l(!0,n.pipelineId)}function C(){a()}return{registerTable:i,registerPipelineDescModal:t,registerStreamDescModal:o,registerBatchDescModal:m,registerPositionModal:f,handleStateDesc:b,handleStartStream:e,handleStopStream:r,handleStartBatch:j,handleSuccess:C,handlePipelineDesc:M,handleSetPosition:w}}}),G=["onClick"];function K(t,s,o,h,m,S){const f=d("TableAction"),l=d("BasicTable"),i=d("PipelineDescModal"),a=d("StreamDescModal"),M=d("BatchDescModal"),b=d("PositionModal");return $(),V("div",null,[p(l,{size:"small",onRegister:t.registerTable},{pipelineName:B(({record:e})=>[z("a",{onClick:r=>t.handlePipelineDesc(e)},H(e.pipelineName),9,G)]),action:B(({record:e})=>[p(f,{actions:[{label:"\u8BE6\u60C5",icon:"ant-design:eye-outlined",onClick:t.handleStateDesc.bind(null,e)},{label:"\u542F\u52A8",icon:"ant-design:play-circle-outlined",onClick:t.handleStartStream.bind(null,e),ifShow:r=>e.status===0||e.status===1||e.status===5||e.status===9},{label:"\u505C\u6B62",icon:"ant-design:pause-circle-outlined",onClick:t.handleStopStream.bind(null,e),ifShow:r=>e.status==2||e.status==3},{label:"\u5168\u91CF\u540C\u6B65",icon:"ant-design:cloud-sync-outlined",onClick:t.handleStartBatch.bind(null,e),ifShow:r=>e.status==0||e.status==1||e.status==5||e.status==9},{label:"\u91CD\u7F6EPosition",icon:"ant-design:vertical-align-middle-outlined",onClick:t.handleSetPosition.bind(null,e),ifShow:r=>e.status==0||e.status==1||e.status==5||e.status==9}]},null,8,["actions"])]),_:1},8,["onRegister"]),p(i,{onRegister:t.registerPipelineDescModal,onSuccess:t.handleSuccess},null,8,["onRegister","onSuccess"]),p(a,{onRegister:t.registerStreamDescModal,onSuccess:t.handleSuccess},null,8,["onRegister","onSuccess"]),p(M,{onRegister:t.registerBatchDescModal,onSuccess:t.handleSuccess},null,8,["onRegister","onSuccess"]),p(b,{onRegister:t.registerPositionModal,onSuccess:t.handleSuccess},null,8,["onRegister","onSuccess"])])}var Be=L(q,[["render",K]]);export{Be as default};
